<!-- use it as { % include "includes/script_show_save_button_on_content-form_change.html" %} in the script area-->
<!--
window.divsButtonMapping = [
        { divs: ["div1", "div2"], buttons: ["save-button1", "save-button2"] } // Both forms trigger both buttons
    ];
-->
<script>
//2.When content changes in a DIV show Save button. Also remove the Content Saved Message
    document.addEventListener("DOMContentLoaded", function () {
        function setupDivTracking(divIds, buttonIds) {
            let divs = divIds.map(id => document.querySelector(`#${id}`)).filter(div => div !== null);
            let saveButtons = buttonIds.map(id => document.querySelector(`#${id}`)).filter(btn => btn !== null);
            let formChanged = false;
    
            if (divs.length === 0 || saveButtons.length === 0) return; // Exit if no valid divs or buttons
    
            toggleButtons(saveButtons, false); // Initially hide buttons
    
            // Attach event listeners to each div
            divs.forEach(div => {
                div.addEventListener("input", handleChange);
                div.addEventListener("change", handleChange);
                div.addEventListener("click", handleChange);
            });
    
            function handleChange() {
                removeMessages();
                if (!formChanged) {
                    formChanged = true;
                    toggleButtons(saveButtons, true);
                }
            }
        }
    
        function removeMessages() {
            document.querySelectorAll(".messages").forEach(message => message.remove());
        }
    
        function toggleButtons(buttons, show) {
            buttons.forEach(button => {
                button.style.display = show ? "inline-block" : "none";
            });
        }
    
        // Automatically call setupDivTracking if div IDs and button IDs are passed via template
        if (window.divButtonMapping) {
            window.divButtonMapping.forEach(mapping => {
                setupDivTracking(mapping.divs, mapping.buttons);
            });
        }
    });


</script>