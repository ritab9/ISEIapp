
{% load template_extras %}

 <div class="card card-body report-page page-break">
    <h5> F. Student Achievement Data </h5>
     <hr>
        <div class="print-section card card-body mb-3">
        <h6>Grade-Level Tests Administered</h6>

        <table class="table table-sm table-bordered">
            <thead>
                <tr>
                    <th>Grade Level</th>
                    <th>Test Administered</th>
                </tr>
            </thead>
            <tbody>
                {% for test in student_achievement.grade_level_tests %}
                    <tr>
                        <td>{{ test.grade_level }}</td>
                        <td>{{ test.test_administered }}</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="2">No grade-level tests reported.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

        {% if standardized_test_report %}
        <div class="print-section card card-body mb-3">
            <h6>Standardized Test Results</h6>

            {% for level, years in standardized_test_report.items %}
                <h6 class="mt-3">{{ level|title }}</h6>

                {% for year, sessions in years.items %}
                    <h7 class="mt-2 d-block">{{ year }}</h7>

                    {% for session in sessions %}
                        <p class="mb-1">
                            <strong>{{ session.test_type }}</strong>
                            {% if session.test_name %}
                                – {{ session.test_name }}
                            {% endif %}
                        </p>

                        <div class="table-responsive mb-3">
                            <table class="table table-sm table-bordered text-center">
                                <thead>
                                    <tr>
                                        <th>Subject</th>
                                        {% for grade in session.grade_range %}
                                            <th>{{ grade }}</th>
                                        {% endfor %}
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for subject, grades in session.scores.items %}
                                        <tr>
                                            <td class="text-left font-weight-bold">
                                                {{ subject }}
                                            </td>
                                            {% for grade in session.grade_range %}
                                                <td>
                                                    {{ grades|get_item:grade|default:"–" }}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>

                    {% endfor %}
                {% endfor %}
            {% endfor %}
        </div>

       <p><strong>Communication with Parents:</strong> {{ student_achievement.communication_parents|default:"–" }}</p>
       <p><strong>Process to Improve:</strong> {{ student_achievement.process_to_improve|default:"–" }}</p>


{% endif %}

    <p class="back-to-toc">
        <a href="#toc">⬆ Back to Table of Contents</a>
    </p>
</div>
