{% extends 'accreditation_base.html' %}
{% load static %}

{% block title %} ISEI Standards {% endblock title %}


    {% block header %}
        {% if guest %}
            {# hide header for guest → leave empty #}
        {% else %}
            {{ block.super }}
        {% endif %}
    {% endblock %}

    {% block secondary_navbar %}
        {% if guest %}
            {# hide navbar for guest → leave empty #}
        {% else %}
            {{ block.super }}
        {% endif %}
    {% endblock %}

    {% block content %}

    <div class="row">

        <div class="my-4 col-auto" style="position: sticky; top: 1rem; align-self: flex-start;">
            {% if not school %}

                <form method="get" class="mb-3">
                    <div class="d-flex flex-column">
                        {% for st in school_types %}
                            <div class="form-check">
                                <input class="form-check-input"
                                       type="checkbox"
                                       name="school_type"
                                       value="{{ st.id }}"
                                       id="st{{ st.id }}"
                                       {% if st.id|stringformat:"s" in selected_school_type_ids %}checked{% endif %}>
                                <label class="form-check-label" for="st{{ st.id }}">
                                    {{ st.name }}
                                </label>
                            </div>
                        {% endfor %}
                    </div>
                    <button type="submit" class="btn btn-sm btn-ISEIblue2 mt-2">Apply Filter</button>
                    {% if selected_school_type_ids %}
                        <a href="{% url 'isei_standards_indicators' %}" class="btn btn-sm btn-outline-secondary mt-2">Clear</a>
                    {% endif %}
                </form>
                <hr>
                <button type="button" class="btn btn-sm btn-outline-ISEIblue4 mb-2"
                        onclick="toggleSchoolTypes()">
                    Show/Hide School Types
                </button>

            {% endif %} <hr>

            <button type="button" onclick="window.print()" class="btn btn-sm btn-ISEIblue4 mb-2">
              Print to PDF
            </button>

            <!--a href="{ % url 'isei_standards_indicator' %}" class="btn btn-sm btn-success">
              Download PDF
            </a-->
        </div>

        <div class="col">
            <div class="report-page">
                <img src="{% static 'appfiles/ISEIcolored.png' %}" alt="ISEI Logo" class="logo ml-4">
                <div class="vertical-text">ISEI EDUCATION ASSOCIATION</div>
                <div class="vertical-line-light"></div>
                <div class="vertical-line-dark"></div>

                <div class="title">
                    Accreditation<br>
                    Standards<br> &amp;<br>
                    Indicators
                </div>

                <div class="version">Version 2.1</div>

                <div class="footer">
                    P.O. Box 946 • Dayton, TN 37321, USA
                </div>
            </div>

            <div class=" page card card-body mx-auto" style="max-width: 1000px;">

                    {% for standard in standards %}
                        <hr class="page-break-before">
                        <h6>{{ standard.number|floatformat:"0"  }}. {{ standard.name }}</h6>
                        <hr>
                        <p class="text-ISEIblue4"> {{ standard.description }}</p>
                        <hr>
                        {% for substandard in standard.substandards.all %}
                            <h7 style="margin-left: 20px;">{{ substandard.number }}. {{ substandard.name }}</h7>

                            {% for indicator in substandard.filtered_indicators %}
                                <div class="keep-together">
                                    <p>{{ substandard.number }}.{{ forloop.counter }}. {{ indicator.description }}
                                        {% if not school %}
                                            <span class="school-type small">({{ indicator.school_type }})</span>
                                        {% endif %}
                                    </p>
                                    <p class="mr-5 text-muted">{{ indicator.met_description }}</p>
                                </div>
                            {% endfor %}
                        {% endfor %}

                        {% for indicator in standard.filtered_indicators %}
                            <div class="keep-together">
                                <p>{{ standard.number|floatformat:"0"  }}.{{ forloop.counter }}. {{ indicator.description }}
                                        {% if not school %}
                                            <span class="school-type small">({{ indicator.school_type }})</span>
                                        {% endif %}
                                </p>
                                <p class="mr-5 col text-muted">{{ indicator.met_description|safe }}</p>
                            </div>
                        {% endfor %}

                    {% endfor %}


            <!--p class="text-center"> As of April, 2025</p -->
        </div>
        </div>
    </div>



    <script>
        function toggleSchoolTypes() {
            document.querySelectorAll('.school-type').forEach(el => {
                el.classList.toggle('hidden');
            });
        }

    </script>


{% endblock %}
